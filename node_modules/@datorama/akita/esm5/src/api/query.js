/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { take } from 'rxjs/operators';
import { queryConfigKey } from './query-config';
/**
 * @template S
 */
var /**
 * @template S
 */
Query = /** @class */ (function () {
    function Query(store) {
        this.store = store;
        this.__store__ = store;
    }
    /**
     * @template R
     * @param {?=} project
     * @return {?}
     */
    Query.prototype.select = /**
     * @template R
     * @param {?=} project
     * @return {?}
     */
    function (project) {
        /** @type {?} */
        var state = project ? project : function (state) { return state; };
        return this.store._select(state);
    };
    /**
     * Select once and complete.
     */
    /**
     * Select once and complete.
     * @template R
     * @param {?} project
     * @return {?}
     */
    Query.prototype.selectOnce = /**
     * Select once and complete.
     * @template R
     * @param {?} project
     * @return {?}
     */
    function (project) {
        return this.select(project).pipe(take(1));
    };
    /**
     * Select the store's loading state.
     */
    /**
     * Select the store's loading state.
     * @return {?}
     */
    Query.prototype.selectLoading = /**
     * Select the store's loading state.
     * @return {?}
     */
    function () {
        return this.select(function (state) { return (/** @type {?} */ (state)).loading; });
    };
    /**
     * Select the store's error state.
     */
    /**
     * Select the store's error state.
     * @return {?}
     */
    Query.prototype.selectError = /**
     * Select the store's error state.
     * @return {?}
     */
    function () {
        return this.select(function (state) { return (/** @type {?} */ (state)).error; });
    };
    /**
     * Get the raw value of the store.
     */
    /**
     * Get the raw value of the store.
     * @return {?}
     */
    Query.prototype.getSnapshot = /**
     * Get the raw value of the store.
     * @return {?}
     */
    function () {
        return this.store._value();
    };
    Object.defineProperty(Query.prototype, "isPristine", {
        /**
         *  Returns whether the state of the store is pristine (the set() method hasn't been explicitly called
         *  since the store creation, or the last time setPristine()was called).
         */
        get: /**
         *  Returns whether the state of the store is pristine (the set() method hasn't been explicitly called
         *  since the store creation, or the last time setPristine()was called).
         * @return {?}
         */
        function () {
            return this.store.isPristine;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Query.prototype, "isDirty", {
        /**
         * Returns whether the state of the store is dirty (the set() method
         * or the setDirty() method has been explicitly called since the store creation,
         * or the last time setPristine() was called).
         */
        get: /**
         * Returns whether the state of the store is dirty (the set() method
         * or the setDirty() method has been explicitly called since the store creation,
         * or the last time setPristine() was called).
         * @return {?}
         */
        function () {
            return !this.store.isPristine;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Query.prototype, "config", {
        get: /**
         * @return {?}
         */
        function () {
            return this.constructor[queryConfigKey];
        },
        enumerable: true,
        configurable: true
    });
    return Query;
}());
/**
 * @template S
 */
export { Query };
function Query_tsickle_Closure_declarations() {
    /**
     * Use only for internal plugins like Pagination - don't use this property *
     * @type {?}
     */
    Query.prototype.__store__;
    /** @type {?} */
    Query.prototype.store;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVlcnkuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZGF0b3JhbWEvYWtpdGEvIiwic291cmNlcyI6WyJzcmMvYXBpL3F1ZXJ5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFFQSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDdEMsT0FBTyxFQUFFLGNBQWMsRUFBc0IsTUFBTSxnQkFBZ0IsQ0FBQzs7OztBQUVwRTs7O0FBQUE7SUFJRSxlQUFzQixLQUFlO1FBQWYsVUFBSyxHQUFMLEtBQUssQ0FBVTtRQUNuQyxJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztLQUN4Qjs7Ozs7O0lBV0Qsc0JBQU07Ozs7O0lBQU4sVUFBVSxPQUF5Qjs7UUFDakMsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFVBQUEsS0FBSyxJQUFJLE9BQUEsS0FBSyxFQUFMLENBQUssQ0FBQztRQUMvQyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQ2xDO0lBRUQ7O09BRUc7Ozs7Ozs7SUFDSCwwQkFBVTs7Ozs7O0lBQVYsVUFBYyxPQUF3QjtRQUNwQyxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQzNDO0lBRUQ7O09BRUc7Ozs7O0lBQ0gsNkJBQWE7Ozs7SUFBYjtRQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFBLEtBQUssSUFBSSxPQUFBLG1CQUFDLEtBQWlDLEVBQUMsQ0FBQyxPQUFPLEVBQTNDLENBQTJDLENBQUMsQ0FBQztLQUMxRTtJQUVEOztPQUVHOzs7OztJQUNILDJCQUFXOzs7O0lBQVg7UUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBQSxLQUFLLElBQUksT0FBQSxtQkFBQyxLQUEyQixFQUFDLENBQUMsS0FBSyxFQUFuQyxDQUFtQyxDQUFDLENBQUM7S0FDbEU7SUFFRDs7T0FFRzs7Ozs7SUFDSCwyQkFBVzs7OztJQUFYO1FBQ0UsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO0tBQzVCO0lBTUQsc0JBQUksNkJBQVU7UUFKZDs7O1dBR0c7Ozs7OztRQUNIO1lBQ0UsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQztTQUM5Qjs7O09BQUE7SUFPRCxzQkFBSSwwQkFBTztRQUxYOzs7O1dBSUc7Ozs7Ozs7UUFDSDtZQUNFLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQztTQUMvQjs7O09BQUE7SUFFRCxzQkFBSSx5QkFBTTs7OztRQUFWO1lBQ0UsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1NBQ3pDOzs7T0FBQTtnQkExRUg7SUEyRUMsQ0FBQTs7OztBQXRFRCxpQkFzRUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdG9yZSB9IGZyb20gJy4vc3RvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgdGFrZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IHF1ZXJ5Q29uZmlnS2V5LCBRdWVyeUNvbmZpZ09wdGlvbnMgfSBmcm9tICcuL3F1ZXJ5LWNvbmZpZyc7XG5cbmV4cG9ydCBjbGFzcyBRdWVyeTxTPiB7XG4gIC8qKiBVc2Ugb25seSBmb3IgaW50ZXJuYWwgcGx1Z2lucyBsaWtlIFBhZ2luYXRpb24gLSBkb24ndCB1c2UgdGhpcyBwcm9wZXJ0eSAqKi9cbiAgX19zdG9yZV9fOiBTdG9yZTxTPjtcblxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgc3RvcmU6IFN0b3JlPFM+KSB7XG4gICAgdGhpcy5fX3N0b3JlX18gPSBzdG9yZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3QgYSBzbGljZSBmcm9tIHRoZSBzdG9yZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogdGhpcy5xdWVyeS5zZWxlY3QoKVxuICAgKiB0aGlzLnF1ZXJ5LnNlbGVjdChzdGF0ZSA9PiBzdGF0ZS5lbnRpdGllcylcbiAgICovXG4gIHNlbGVjdDxSPihwcm9qZWN0PzogKHN0b3JlOiBTKSA9PiBSKTogT2JzZXJ2YWJsZTxSPjtcbiAgc2VsZWN0KCk6IE9ic2VydmFibGU8Uz47XG4gIHNlbGVjdDxSPihwcm9qZWN0PzogKHN0b3JlOiBTKSA9PiBSKTogT2JzZXJ2YWJsZTxSIHwgUz4ge1xuICAgIGxldCBzdGF0ZSA9IHByb2plY3QgPyBwcm9qZWN0IDogc3RhdGUgPT4gc3RhdGU7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuX3NlbGVjdChzdGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0IG9uY2UgYW5kIGNvbXBsZXRlLlxuICAgKi9cbiAgc2VsZWN0T25jZTxSPihwcm9qZWN0OiAoc3RvcmU6IFMpID0+IFIpOiBPYnNlcnZhYmxlPFI+IHtcbiAgICByZXR1cm4gdGhpcy5zZWxlY3QocHJvamVjdCkucGlwZSh0YWtlKDEpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3QgdGhlIHN0b3JlJ3MgbG9hZGluZyBzdGF0ZS5cbiAgICovXG4gIHNlbGVjdExvYWRpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0KHN0YXRlID0+IChzdGF0ZSBhcyBTICYgeyBsb2FkaW5nOiBib29sZWFuIH0pLmxvYWRpbmcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdCB0aGUgc3RvcmUncyBlcnJvciBzdGF0ZS5cbiAgICovXG4gIHNlbGVjdEVycm9yKCkge1xuICAgIHJldHVybiB0aGlzLnNlbGVjdChzdGF0ZSA9PiAoc3RhdGUgYXMgUyAmIHsgZXJyb3I6IGFueSB9KS5lcnJvcik7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSByYXcgdmFsdWUgb2YgdGhlIHN0b3JlLlxuICAgKi9cbiAgZ2V0U25hcHNob3QoKTogUyB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuX3ZhbHVlKCk7XG4gIH1cblxuICAvKipcbiAgICogIFJldHVybnMgd2hldGhlciB0aGUgc3RhdGUgb2YgdGhlIHN0b3JlIGlzIHByaXN0aW5lICh0aGUgc2V0KCkgbWV0aG9kIGhhc24ndCBiZWVuIGV4cGxpY2l0bHkgY2FsbGVkXG4gICAqICBzaW5jZSB0aGUgc3RvcmUgY3JlYXRpb24sIG9yIHRoZSBsYXN0IHRpbWUgc2V0UHJpc3RpbmUoKXdhcyBjYWxsZWQpLlxuICAgKi9cbiAgZ2V0IGlzUHJpc3RpbmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuaXNQcmlzdGluZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHN0YXRlIG9mIHRoZSBzdG9yZSBpcyBkaXJ0eSAodGhlIHNldCgpIG1ldGhvZFxuICAgKiBvciB0aGUgc2V0RGlydHkoKSBtZXRob2QgaGFzIGJlZW4gZXhwbGljaXRseSBjYWxsZWQgc2luY2UgdGhlIHN0b3JlIGNyZWF0aW9uLFxuICAgKiBvciB0aGUgbGFzdCB0aW1lIHNldFByaXN0aW5lKCkgd2FzIGNhbGxlZCkuXG4gICAqL1xuICBnZXQgaXNEaXJ0eSgpIHtcbiAgICByZXR1cm4gIXRoaXMuc3RvcmUuaXNQcmlzdGluZTtcbiAgfVxuXG4gIGdldCBjb25maWcoKTogUXVlcnlDb25maWdPcHRpb25zIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3RvcltxdWVyeUNvbmZpZ0tleV07XG4gIH1cbn1cbiJdfQ==